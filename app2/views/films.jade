doctype html
html
  head
    title= title
    block stylesheets
      link(rel='stylesheet', href='/stylesheets/style.css')
  body
    .dropdown
      h1= title
      .dropdown-content
        p: #[a(href='/') Home] #[a(href='/films') Films] #[a(href='/genres') Genres] #[a(href='/predict') Predict]

    if route == '/films'
      p Here you can view all movies in our database. Click on column headers to show or hide information as needed. For more detailed information on a movie, click on its row to go to its specific page.
    else
      p This page displays all the movies associated with your chosen genre.

    each col in allCols
      if col != 'movieId'
        .button_bar
          form(action=route, method='GET')
            input(type='hidden', name='col', id='col', value=col)
            input(type='hidden', name='shownCols', id='shownCols', value=shownCols)
            input(type='hidden', name='searchQuery', id='searchQuery', value=searchQuery)
            input(type='hidden', name='itemNum', id='itemNum', value=itemNum)
            button(type='submit') #{col}
    p
    .button_bar
      form(action=route, method='GET')
        label(for='searchQuery')
        input(type='text', name='searchQuery', id='searchQuery', placeholder='search keywords')
        input(type='hidden', name='col', id='col', value=col)
        input(type='hidden', name='shownCols', id='shownCols', value=shownCols)
        button(type='submit') Search

    .button_bar
      form(action=route, method='GET')
        input(type='hidden', name='shownCols', id='shownCols', value=shownCols)
        input(type='hidden', name='searchQuery', id='searchQuery', value=searchQuery)
        input(type='hidden', name='itemNum', id='itemNum', value=itemNum-30)
        button(type='submit') Previous Page

    .button_bar
      form(action=route, method='GET')
        input(type='hidden', name='shownCols', id='shownCols', value=shownCols)
        input(type='hidden', name='searchQuery', id='searchQuery', value=searchQuery)
        input(type='hidden', name='itemNum', id='itemNum', value=itemNum+30)
        button(type='submit') Next Page

    table
      thead
        tr
          each title in shownCols
            if title != 'movieId'
              th= title
      tbody
        each row in data
          tr(class='row-link', data-url=`/filmInfo/${row.movieId}`)
            each title in shownCols
              if title != 'movieId'
                if title == 'TopTwoActors'
                  td #{row.TopTwoActors.slice(1,row.TopTwoActors.length-1).split(', ').map(actor => actor.slice(1,actor.length-1))}
                else
                  td= row[title]

    script.
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.row-link').forEach(function(element) {
          element.addEventListener('click', function() {
            const url = this.dataset.url;
            window.location.href = url;
          });
        });
      });
